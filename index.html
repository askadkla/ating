<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <link rel="stylesheet" href="css/style.css" />
    <script
            id="jqbb"
            src="https://libs.baidu.com/jquery/1.11.1/jquery.min.js"
    ></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .city {
            width: 100%;
            position: fixed;
            bottom: 0px;
            z-index: 100;
        }
        .city img {
            width: 100%;
        }
        audio {
            opacity: 0;
        }

        /* 新增音乐控制按钮样式 */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .music-control:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        .music-icon {
            font-size: 24px;
            color: white;
            transition: all 0.3s ease;
        }

        .music-control.playing .music-icon {
            color: #ff6b6b;
        }

        .music-tooltip {
            position: absolute;
            top: 60px;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }

        .music-control:hover .music-tooltip {
            opacity: 1;
        }
    </style>
    <title>生日快乐</title>
    <!-- 弹窗样式 -->
    <link href="modal.css" rel="stylesheet" />

    <style type="text/css">
        html,
        body {
            background-color: black;
            overflow: hidden;
            user-select: none;
            margin: 0;
        }
    </style>
</head>
<body onselectstart="return false">
<div class="star comet"></div>
<script src="js/index.js"></script>

<!-- 新增音乐控制按钮 -->
<div class="music-control" id="musicControl">
    <div class="music-icon">🎵</div>
    <div class="music-tooltip">点击控制音乐</div>
</div>

<!--对话部分-->
<div class="share_img"><img src="img/xin.png" alt="" /></div>

<div class="page_one">
    <div class="content">
        <div class="text_wrapper" style="margin-bottom: 100px">
            <img class="xin" src="img/xin.png" alt="" style="width: 300px" />
            <div class="text" style="font-size: 38px">
                阿婷，生日快乐，愿意看场专属于你的烟花秀吗！！！
            </div>
        </div>
    </div>
    <div class="btn-groups">
        <div class="heart-btn">
            <div id="yes" class="btn btn-a" style="font-size: 22px">
                <span>开始</span>
            </div>
        </div>
        <div id="no" class="btn btn-b" style="font-size: 22px">
            <span>婉拒</span>
        </div>
    </div>
</div>
<!--烟花部分-->
<canvas id="cas" style="background-color: rgba(0, 5, 24, 1); z-index: 9999">
    浏览器不支持canvas
</canvas>
<div class="city">
    <img src="img/city.png" alt="" />
</div>
<img src="img/moon.png" alt="" id="moon" style="visibility: hidden" />
<div class="blessings-grid">
    <div class="shape long">
        <div>愿每个晴天</div>
        <div>阳光总能</div>
        <div>打在你脸上，</div>
        <div>生日快乐</div>
    </div>
    <div class="shape medium">
        <div>愿你的</div>
        <div>每一岁，</div>
        <div>都能奔走在</div>
        <div>热爱里</div>
    </div>
    <div class="shape short">健康平安</div>
    <div class="shape long">
        <div>愿时光</div>
        <div>待你以温柔，</div>
        <div>岁月，</div>
        <div>予你以静好</div>
    </div>
    <div class="shape medium">
        <div>往后余生，</div>
        <div>平安健康，</div>
        <div>喜乐无忧</div>
    </div>
    <div class="shape short">万事胜意</div>
    <div class="shape medium">
        <div>新的一岁，</div>
        <div>前方皆是坦途，</div>
        <div>未来充满希望</div>
    </div>
    <div class="shape short">一直陪你</div>
    <div class="shape long">
        <div>希望温暖和爱，</div>
        <div>一直陪伴，</div>
        <div>在你身边</div>
    </div>
    <div class="shape short">永远是大漂亮</div>

    <div class="shape medium">
        <div>时光不老，</div>
        <div>我们不散，</div>
        <div>情谊常在心间</div>
    </div>
    <div class="shape short">平安喜乐</div>

    <div class="shape medium">
        <div>新的一岁，</div>
        <div>愿你依旧</div>
        <div>温暖如初，</div>
        <div>闪闪发光</div>
    </div>
    <div class="shape short">家人健康</div>

    <div class="shape medium">
        <div>愿你的事业</div>
        <div>乘风破浪，</div>
        <div>收获满满成就</div>
    </div>
    <div class="shape short">事业顺遂</div>

    <div class="shape medium">
        <div>愿好运常伴，</div>
        <div>机遇频现，</div>
        <div>梦想皆可实现</div>
    </div>
    <div class="shape short">狂吃不胖</div>
    <div class="shape medium">
        <div>愿你享受</div>
        <div>美食无忧，</div>
        <div>保持健康活力</div>
    </div>
    <div class="shape short">自由暴富</div>

    <div class="shape long">
        <div>愿你有</div>
        <div>说走就走</div>
        <div>的勇气，</div>
        <div>也有享受</div>
        <div>旅途的心情</div>
    </div>
    <div class="shape medium">
        <div>愿你的生活</div>
        <div>充满小确幸，</div>
        <div>对未来永远</div>
        <div>充满期待</div>
    </div>
    <div class="shape short">每天开心</div>
    <div class="shape long">
        <div>愿你有能做</div>
        <div>自己的自由，</div>
        <div>和敢做</div>
        <div>自己的胆量</div>
    </div>
    <div class="shape medium">
        <div>愿生活给你</div>
        <div>满满的甜蜜惊喜，</div>
        <div>快乐加倍</div>
    </div>
    <!-- 新增75个祝福，确保不重复且符合组合规则 -->
    <div class="shape short">好运常伴</div>
    <div class="shape long">
        <div>愿你眼中</div>
        <div>总有光芒</div>
        <div>活成自己</div>
        <div>想要的模样</div>
    </div>
    <div class="shape medium">
        <div>新的一岁，</div>
        <div>愿快乐与你</div>
        <div>环环相扣</div>
    </div>
    <div class="shape short">笑口常开</div>
    <div class="shape medium">
        <div>愿所有的幸运</div>
        <div>都降临在你身旁</div>
    </div>
    <div class="shape short">心想事成</div>
    <div class="shape long">
        <div>愿岁月温柔待你</div>
        <div>愿生活眷顾你</div>
        <div>愿未来的日子</div>
        <div>你与幸福撞个满怀</div>
    </div>
    <div class="shape short">好运连连</div>
    <!-- 第3组：medium-short -->
    <div class="shape medium">
        <div>愿你能在忙碌间隙</div>
        <div>筑一座心灵花园</div>
    </div>
    <div class="shape short">心有所栖</div>

    <!-- 第4组：long-medium-short -->
    <div class="shape long">
        <div>春赏繁花夏观星，</div>
        <div>秋拾落叶冬听雪，</div>
        <div>愿你的四季</div>
        <div>皆有故事</div>
    </div>
    <div class="shape medium">
        <div>愿你所有的温柔</div>
        <div>都不被辜负</div>
    </div>
    <div class="shape short">温柔以待</div>

    <!-- 第5组：medium-short -->
    <div class="shape medium">
        <div>愿你有如风般的自由</div>
        <div>轻盈掠过山河</div>
    </div>
    <div class="shape short">自在如风</div>

    <!-- 第6组：long-short -->
    <div class="shape long">
        <div>不必追逐太阳，</div>
        <div>因为你本身就拥有</div>
        <div>照亮自己旅途</div>
        <div>的温暖光芒</div>
    </div>
    <div class="shape short">自带光芒</div>

    <!-- 第7组：long-medium-short -->
    <div class="shape long">
        <div>愿那些微小</div>
        <div>而确实的幸福</div>
        <div>常常与你</div>
        <div>不期而遇</div>
    </div>
    <div class="shape medium">
        <div>点缀平凡的日子</div>
        <div>增添诗意</div>
    </div>
    <div class="shape short">小确幸</div>

    <!-- 第8组：medium-short -->
    <div class="shape medium">
        <div>愿你有温暖的港湾</div>
        <div>可安心停靠</div>
        <div>也有探索</div>
        <div>未知的勇气</div>
    </div>
    <div class="shape short">安稳前行</div>

    <!-- 第9组：long-short -->
    <div class="shape long">
        <div>愿岁月轻柔，</div>
        <div>为你增添</div>
        <div>从容的韵味</div>
        <div>却不带走</div>
        <div>眼眸里的清澈</div>
    </div>
    <div class="shape short">清澈依旧</div>

    <!-- 第10组：medium-short -->
    <div class="shape medium">
        <div>愿你能始终保有</div>
        <div>让心灵泛起</div>
        <div>涟漪的热爱</div>
    </div>
    <div class="shape short">热爱长存</div>

    <!-- 第11组：long-medium-short -->
    <div class="shape long">
        <div>不必迎合</div>
        <div>世俗的节奏</div>
        <div>愿你遵循</div>
        <div>内心的韵律</div>
    </div>
    <div class="shape medium">
        <div>走出属于自己的</div>
        <div>独特生命轨迹</div>
    </div>
    <div class="shape short">活出自我</div>

    <!-- 第12组：long-short -->
    <div class="shape long">
        <div>愿你的细腻</div>
        <div>和敏感被珍视</div>
        <div>成为感知世界</div>
        <div>美好的独特天赋</div>
    </div>
    <div class="shape short">细腻如初</div>

    <!-- 第13组：medium-short -->
    <div class="shape medium">
        <div>愿你在喧嚣中</div>
        <div>能守住一方安静</div>
        <div>在独处时积蓄力量</div>
    </div>
    <div class="shape short">宁静致远</div>

    <!-- 第14组：long-medium-short -->
    <div class="shape long">
        <div>愿你付出的善意</div>
        <div>终会以某种方式</div>
        <div>温柔地回流向你</div>
    </div>
    <div class="shape medium">
        <div>愿你对世界</div>
        <div>永远怀有</div>
        <div>孩童般的好奇</div>
    </div>
    <div class="shape short">善意循环</div>

    <!-- 第15组：medium-short -->
    <div class="shape medium">
        <div>愿你前行的道路</div>
        <div>桥梁都坚固，</div>
        <div>隧道都光明</div>
    </div>
    <div class="shape short">前路光明</div>

    <!-- 第17组：long-medium-short -->
    <div class="shape long">
        <div>愿美的事物常驻你心</div>
        <div>一句诗，一段旋律</div>
    </div>
    <div class="shape medium">
        <div>或一个黄昏的剪影</div>
        <div>皆能触动心弦</div>
    </div>
    <div class="shape short">美在心头</div>

    <!-- 第18组：medium-short -->
    <div class="shape medium">
        <div>愿你的步伐</div>
        <div>从容不迫</div>
        <div>既能奋力奔跑</div>
        <div>又能游刃有余</div>
    </div>
    <div class="shape short">从容前行</div>

    <!-- 第19组：long-short -->
    <div class="shape long">
        <div>愿你的声音</div>
        <div>能被真正懂的人听见</div>
        <div>你的心事</div>
        <div>能得到真诚的回应</div>
    </div>
    <div class="shape short">心有共鸣</div>

    <!-- 第20组：medium-short -->
    <div class="shape medium">
        <div>不恋过往，</div>
        <div>不畏将来，</div>
        <div>愿你温柔地</div>
        <div>珍重逝去的时光</div>
    </div>
    <div class="shape short">幸福安康</div>
    <div class="shape long">
        <div>希望你的旅途</div>
        <div>星辰大海相伴</div>
        <div>前程似锦</div>
    </div>
    <div class="shape short">青春永驻</div>
    <div class="shape medium">
        <div>愿你的心中</div>
        <div>永远有星光</div>
    </div>
    <div class="shape short">快乐无限</div>
    <div class="shape long">
        <div>愿你的人生路上</div>
        <div>处处是风景</div>
        <div>时时都开心</div>
    </div>
    <div class="shape medium">
        <div>新的一岁，</div>
        <div>要更加热爱自己</div>
    </div>
    <div class="shape short">甜蜜温馨</div>
    <!-- 第2组：long-short -->
    <div class="shape long">
        <div>愿书页的沙沙声</div>
        <div>成为你最美的背景乐</div>
        <div>字里行间皆是</div>
        <div>与自我对话的温柔时光</div>
    </div>
    <div class="shape short">书香为伴</div>
    <div class="shape long">
        <div>愿你的世界</div>
        <div>永远有阳光照耀</div>
        <div>温暖如春</div>
    </div>
    <div class="shape short">财源广进</div>
    <div class="shape medium">
        <div>愿快乐很简单</div>
        <div>幸福很自然</div>
    </div>
    <div class="shape short">家庭和睦</div>
    <div class="shape medium">
        <div>新的一岁，</div>
        <div>愿生活温柔以待</div>
    </div>
    <div class="shape long">
        <div>愿你所有的努力</div>
        <div>都有回报</div>
        <div>所有的希望都能实现</div>
    </div>
    <div class="shape short">友谊长存</div>
    <div class="shape medium">
        <div>愿你的每一天</div>
        <div>都充满惊喜</div>
    </div>
    <div class="shape short">步步高升</div>
    <div class="shape long">
        <div>愿你前路浩浩荡荡</div>
        <div>万事尽可期待</div>
    </div>
    <div class="shape short">活力四射</div>
    <div class="shape medium">
        <div>愿幸福像花儿一样</div>
        <div>为你绽放</div>
    </div>
    <div class="shape short">心情愉悦</div>
    <div class="shape long">
        <div>愿你被这个世界</div>
        <div>温柔以待</div>
        <div>快乐永相伴</div>
    </div>
    <div class="shape short">笑靥如花</div>
    <!-- 第16组：long-short -->
    <div class="shape long">
        <div>愿你允许情绪</div>
        <div>如云朵般自然来去</div>
        <div>懂得倾听并接纳</div>
        <div>每一个真实的自己</div>
    </div>
    <div class="shape short">接纳自我</div>
    <div class="shape long">
        <div>愿你的心中</div>
        <div>永远有光</div>
        <div>照亮前行的路</div>
    </div>
    <div class="shape short">无忧无虑</div>
    <div class="shape long">
        <div>愿你的人生</div>
        <div>像彩虹一样绚烂</div>
        <div>多彩多姿</div>
    </div>
    <div class="shape short">幸福满满</div>
    <div class="shape medium">
        <div>愿温暖围绕你</div>
        <div>每个四季</div>
    </div>
    <div class="shape short">活力无限</div>
    <div class="shape medium">
        <div>愿你的心中</div>
        <div>永远有星辰大海</div>
    </div>
    <div class="shape short">快乐常存</div>
    <div class="shape long">
        <div>愿你被爱包围</div>
        <div>幸福常伴左右</div>
        <div>岁岁平安</div>
    </div>
    <div class="shape short">笑容灿烂</div>
    <div class="shape long">
        <div>愿你的人生旅途</div>
        <div>繁花似锦</div>
        <div>未来可期</div>
    </div>
    <div class="shape short">健康快乐</div>
    <div class="shape medium">
        <div>愿快乐很简单</div>
        <div>幸福很自然</div>
    </div>
    <div class="shape short">快乐永驻</div>
    <div class="shape long">
        <div>愿你被岁月</div>
        <div>温柔相待</div>
        <div>被幸福</div>
        <div>紧紧拥抱</div>
    </div>
    <div class="shape medium">
        <div>新的一岁，</div>
        <div>愿生活甜如蜜</div>
    </div>
    <div class="shape short">幸福永久</div>
    <div class="shape medium">
        <div>愿你的世界</div>
        <div>永远晴朗</div>
    </div>
    <div class="shape short">平安吉祥</div>
    <div class="shape medium">
        <div>愿幸福像风一样</div>
        <div>常伴你左右</div>
    </div>
    <div class="shape short">笑逐颜开</div>
    <div class="shape long">
        <div>愿你的人生充满</div>
        <div>无限的可能和希望</div>
    </div>
    <div class="shape short">温馨常伴</div>
    <div class="shape long">
        <div>愿你被世界宠爱</div>
        <div>被时光厚待</div>
        <div>幸福一生</div>
    </div>
    <div class="shape short">睡得倍香</div>
    <div class="shape long">
        <div>愿你所有的期待</div>
        <div>都能出现</div>
        <div>所有的梦想</div>
        <div>都能实现</div>
    </div>
    <div class="shape short">吃得倍香</div>
    <div class="shape medium">
        <div>愿温暖永驻</div>
        <div>快乐长存</div>
    </div>
    <div class="shape short">玩得倍欢</div>
    <div class="shape long">
        <div>愿你的人生</div>
        <div>像歌一样</div>
        <div>婉转动听</div>
        <div>快乐无限</div>
    </div>
    <div class="shape short">KTV麦霸</div>
    <div class="shape long">
        <div>愿你走完</div>
        <div>山水万城</div>
        <div>仍与理想重逢</div>
    </div>
    <div class="shape medium">
        <div>愿你所经之地</div>
        <div>尽是繁华</div>
        <div>所托之人</div>
        <div> 都不辜负</div>
    </div>
    <div class="shape short">不负韶华</div>
    <div class="shape medium">
        <div>愿你贪吃不胖</div>
        <div>愿你懒惰不丑</div>
        <div>愿你深情不被辜负</div>
    </div>
    <div class="shape short">天真依旧</div>
    <div class="shape medium">
        <div>愿有人问你粥可温</div>
        <div>有人与你立黄昏</div>
    </div>
    <div class="shape short">岁月静好</div>
    <div class="shape medium">
        <div>愿你一生努力，</div>
        <div>一生被爱</div>
        <div>想要的都拥有</div>
    </div>
    <div class="shape short">得偿所愿</div>

</div>

<!--音乐部分-->
<audio id="birthdayMusic" loop>
    <!-- 使用外部托管的生日音乐 -->
    <source
            src="https://www.bensound.com/bensound-music/bensound-happyrock.mp3"
            type="audio/mpeg"
    />
    <!-- 备用音乐源 -->
    <source
            src="https://assets.mixkit.co/music/preview/mixkit-birthday-happy-3.mp3"
            type="audio/mpeg"
    />
    您的浏览器不支持音频播放
</audio>

<script src="jquery.min.js"></script>
<script src="fire.js"></script>
<script src="talk.js"></script>

<!-- 新增音乐控制脚本 -->
<script>
    $(document).ready(function () {
        // 获取音频元素和控制按钮
        const audio = document.getElementById("birthdayMusic");
        const musicControl = document.getElementById("musicControl");
        const musicIcon = musicControl.querySelector(".music-icon");

        // 初始状态：音乐暂停
        audio.pause();
        let isPlaying = false;

        // 音乐控制按钮点击事件
        musicControl.addEventListener("click", function () {
            if (isPlaying) {
                // 暂停音乐
                audio.pause();
                musicIcon.textContent = "🔇";
                musicControl.classList.remove("playing");
                isPlaying = false;
            } else {
                // 播放音乐
                audio
                    .play()
                    .then(() => {
                        musicIcon.textContent = "🎵";
                        musicControl.classList.add("playing");
                        isPlaying = true;
                    })
                    .catch((error) => {
                        console.log("播放失败，可能需要用户交互:", error);
                        // 如果自动播放被阻止，提示用户
                        alert('请点击"开始吧"按钮后，再点击音乐图标播放音乐');
                    });
            }
        });

        // 页面首次交互时尝试自动播放（解决浏览器限制）
        let hasInteracted = false;

        document.addEventListener("click", function firstInteraction() {
            if (!hasInteracted) {
                hasInteracted = true;
                // 尝试自动播放音乐
                audio
                    .play()
                    .then(() => {
                        musicIcon.textContent = "🎵";
                        musicControl.classList.add("playing");
                        isPlaying = true;
                    })
                    .catch((e) => {
                        // 自动播放被阻止是正常现象
                        console.log("自动播放被阻止，需要用户明确交互");
                    });

                // 移除事件监听
                document.removeEventListener("click", firstInteraction);
            }
        });

        // 监听音频结束事件，实现无缝循环
        audio.addEventListener("ended", function () {
            audio.currentTime = 0;
            if (isPlaying) {
                audio.play();
            }
        });

        // 音频加载错误处理
        audio.addEventListener("error", function (e) {
            console.error("音频加载错误:", e);
            musicIcon.textContent = "❌";
            musicControl.title = "音乐加载失败，请检查网络连接";
        });

        // 音频加载成功
        audio.addEventListener("canplay", function () {
            console.log("音频可以播放");
        });
    });
</script>
</body>
</html>
